<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connecting Australia: The Domestic Aviation Network</title>
    
    <!-- Vega-Lite -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- HERO SECTION: INTRODUCTION + MAP -->
    <section class="hero-section">
        <!-- LEFT: Introduction Text (1/3) -->
        <div class="hero-text">
            <h1>Connecting Australia</h1>
            <p>
                Australia's aviation network spans <strong>7.7 million km²</strong>, connecting major cities, 
                regional centers, and remote communities across one of the world's largest countries.
            </p>
            <p>
                From tropical Cairns to southern Tasmania, <strong>334 airports</strong> facilitate over 
                <strong>90 million passenger movements</strong> annually, making air travel essential to 
                Australian life and commerce.
            </p>
            <p style="margin-top: 20px; color: #7f8c8d; font-size: 16px;">
                Each circle represents an airport, sized by passenger volume. Hover for details.
            </p>
        </div>

        <!-- RIGHT: Map Visualization (2/3) -->
        <div class="hero-map">
            <div id="map" class="loading">Loading map...</div>
        </div>
    </section>

    <div class="container">

        <!-- TWO COLUMN CHARTS -->
        <section class="section">
            <h2 class="section-title">Geographic Distribution</h2>
            <div class="two-col">
                <!-- TOP AIRPORTS BAR CHART -->
                <div class="chart-box">
                    <h3 class="chart-title">Busiest Airports (2024)</h3>
                    <div id="bar-chart" class="chart loading">Loading chart...</div>
                </div>

                <!-- ELEVATION DISTRIBUTION -->
                <div class="chart-box">
                    <h3 class="chart-title">Elevation Distribution</h3>
                    <div id="altitude-chart" class="chart loading">Loading chart...</div>
                </div>
            </div>
        </section>

        <!-- INSIGHT 2 -->
        <section class="section">
            <div class="insight">
                
                <strong>Insight:</strong> 
                Australia's busiest airports are predominantly located in coastal capital cities at low elevations, 
                with Sydney, Melbourne, and Brisbane leading passenger traffic. The elevation distribution reveals 
                that over 200 airports operate below 100 meters, reflecting the nation's coastal population 
                concentration. Inland airports serving regional and mining communities operate at higher elevations, 
                with some exceeding 500 meters, requiring specialised operational considerations.
            </div>
        </section>

        <!-- BOTTOM ROW -->
        <section class="section">
            <h2 class="section-title">Aviation Growth Trends</h2>
            <div class="two-col hero-style-reverse">
                <!-- HISTORICAL TRENDS LINE CHART (LEFT - 2/3) -->
                <div class="chart-box">
                    <h3 class="chart-title">24 Years of Growth (2000-2024)</h3>
                    <div id="line-chart" class="chart loading">Loading chart...</div>
                </div>

                <!-- TEXT BOX (RIGHT - 1/3) -->
                <div class="chart-box text-only">
                    <h3 class="chart-title">Growth Patterns</h3>
                    <p>
                        <strong>Steady Growth Era (2000-2019):</strong> Australian domestic aviation experienced 
                        consistent growth over two decades, with Sydney and Melbourne maintaining their positions 
                        as the nation's busiest airports. Brisbane and the Gold Coast emerged as major Queensland 
                        hubs, while Perth served as the primary gateway to Western Australia.
                    </p>
                    <p>
                        <strong>COVID-19 Impact (2020):</strong> The pandemic caused an unprecedented 70% decline 
                        in passenger traffic across all major airports in 2020, bringing the industry to near standstill. 
                        This dramatic drop affected every capital city and regional center uniformly.
                    </p>
                    <p>
                        <strong>Recovery and Resilience (2021-2024):</strong> The sector demonstrated remarkable 
                        recovery, with passenger numbers rebounding to near pre-pandemic levels by 2024. Sydney and 
                        Melbourne regained their 24-25 million annual passenger volumes, showcasing the essential 
                        role of air travel in Australian life.
                    </p>
                    <p style="margin-top: 20px; color: #7f8c8d; font-size: 16px;">
                        The parallel growth patterns across major cities highlight Australia's interconnected domestic 
                        aviation network and shared economic trends.
                    </p>
                </div>
            </div>
        </section>
    </div>

    <!-- FOOTER -->
    <footer class="footer">
        <div class="footer-content">
            <h3>Data Sources & Information</h3>
            <div class="footer-links">
                <p><strong>Data Sources:</strong></p>
                <p>
                    OpenFlights Airport Database • 
                    <a href="https://www.bitre.gov.au" target="_blank">BITRE (Bureau of Infrastructure and Transport Research Economics)</a>
                </p>
                <p style="margin-top: 20px;">
                    <strong>Author:</strong> Rehan Ali • 
                    <strong>Course:</strong> FIT3179 Data Visualisation 2 • 
                    <strong>Date:</strong> October 2025
                </p>
                
            </div>
        </div>
    </footer>

    <!-- VEGA-LITE EMBEDDING SCRIPT -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Embed options for all visualizations
            const embedOptions = {
                actions: {
                    export: true,
                    source: false,
                    compiled: false,
                    editor: false
                },
                config: {
                    view: {
                        continuousWidth: 400,
                        continuousHeight: 300
                    }
                },
                renderer: 'svg'
            };
            
            // 1. Embed Map
            /*
            * Australian Domestic Airport Network Visualization
            * 
            * This Vega-Lite specification creates an interactive map of Australian airports
            * with circles sized by annual passenger volume (2024 data) and colored by state/territory.
            * 
            * Key features:
            * - Base map of Australia using TopoJSON country boundaries
            * - Airport circles filtered to show only commercial airports with:
            *   - Valid IATA codes
            *   - Passenger data available
            *   - Excludes secondary/general aviation airports (ACF, MEB, MBW, BWU, JAD, PEA)
            *     that were incorrectly assigned duplicate passenger counts
            * - Circle size scaled by passenger volume using square root transformation
            * - Color coding by Australian state/territory
            * - City labels for major airports (Sydney, Melbourne, Brisbane)
            * - Interactive tooltips showing airport details on hover
            * 
            * Data source: data/airports_merged.csv
            */
            vegaEmbed('#map', 'js/map.json', embedOptions)
                .then(result => console.log('Map loaded successfully'))
                .catch(error => console.error('Error loading map:', error));
            
            // 2. Embed Bar Chart
            vegaEmbed('#bar-chart', 'js/bar_cart.json', embedOptions)
                .then(result => console.log('Bar chart loaded successfully'))
                .catch(error => console.error('Error loading bar chart:', error));
            
            // 3. Embed Line Chart
            vegaEmbed('#line-chart', 'js/line_chart.json', embedOptions)
                .then(result => console.log('Line chart loaded successfully'))
                .catch(error => console.error('Error loading line chart:', error));
            
            // 4. Embed Altitude Chart
            vegaEmbed('#altitude-chart', 'js/altitude.json', embedOptions)
                .then(result => console.log('Altitude chart loaded successfully'))
                .catch(error => console.error('Error loading altitude chart:', error));
        });
    </script>
</body>
</html>